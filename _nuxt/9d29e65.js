(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{1351:function(e,t){},1352:function(e,t){},1353:function(e,t){},1354:function(e,t){},1355:function(e,t){},1580:function(e,t,n){"use strict";n.r(t);var o=n(3),r=(n(21),n(375),n(953)),c=(n(1100),n(149)),d={props:{scale:Number,pageNumber:Number,pdf:Object,handlePanning:Function,onCLickSinglePageOuter:Function,onMouseMoveOnPages:Function,onMouseLeaveFromPages:Function,setPageHeight:Function,setPageWidth:Function,file:Object},data:function(){return{scaleZ:2,currentPage:1}},mounted:function(){this.getPage(),document.getElementsByClassName("pdf-editor-view")[0].addEventListener("scroll",this.onScroll)},computed:{isConfirm:function(){return String(this.file.fileAction).toLowerCase()===c.a.CONFIRM}},methods:{getPage:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,canvas,o,r,c,d,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pdf.getPage(e.pageNumber).then((function(t){e.$store.commit("SET_PDF_OFFSET_Y",t.view[1]),e.$store.commit("SET_PDF_OFFSET_X",t.view[0])})),t.next=3,e.pdf.getPage(e.pageNumber);case 3:n=t.sent,canvas=e.$refs.canvas,o=canvas.getContext("2d"),r=window.devicePixelRatio||1,c=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1,d=r/c,l=n.getViewport({scale:e.scaleZ}),n.getViewport({scale:e.$refs.PdfPage.clientWidth/l.width}),f=l,canvas.width=f.width*d,canvas.height=f.height*d,e.$emit("setPageHeight",canvas.height),canvas.style.width="100%",canvas.style.height="100%",o.setTransform(d,0,0,d,0,0),n.render({canvasContext:o,viewport:l}),e.renderAnnotation(n),e.$emit("setPageWidth",{width:canvas.width,height:canvas.height});case 21:case"end":return t.stop()}}),t)})))()},renderAnnotation:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.$refs.annotationLayer,n.next=3,e.getAnnotations();case 3:return c=n.sent,d=e.getViewport({scale:t.$store.state.pdfScale}),n.next=7,r.AnnotationLayer.render({viewport:d.clone({dontFlip:!0}),div:o,page:e,annotations:c,renderInteractiveForms:!0});case 7:case"end":return n.stop()}}),n)})))()},onScroll:function(){var e=document.getElementsByClassName("pdf-editor-view")[0];e.scrollTop+680>e.scrollHeight&&this.isConfirm&&(e.removeEventListener("scroll",this.onScroll),this.$store.commit("SET_PDF_PAGE_BOTTOM"))}}},l=n(1),component=Object(l.a)(d,(function(){var e=this,t=e._self._c;return t("div",{ref:"PdfPage",staticClass:"pdf-page"},[t("div",{ref:"annotationLayer",staticClass:"annotationLayer"}),e._v(" "),t("canvas",{directives:[{name:"hammer",rawName:"v-hammer:pan",value:function(t){return e.handlePanning(t,void 0,void 0,e.pageNumber)},expression:"(ev) => handlePanning(ev, undefined, undefined, pageNumber)",arg:"pan"}],ref:"canvas",staticClass:"pdf-canvas",on:{click:function(t){return e.onCLickSinglePageOuter(t,e.pageNumber)},mousemove:e.onMouseMoveOnPages,mouseleave:e.onMouseLeaveFromPages}})])}),[],!1,null,"711573a0",null);t.default=component.exports},954:function(e,t){}}]);